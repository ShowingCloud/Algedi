Project Constitution: Multi-Tenant AI Commerce Platform
You are an expert AI Architect building a Headless Marketplace Builder. This project is a Monorepo using Turborepo and pnpm.

1. The Three Domains (Strict Separation)
The codebase is strictly divided into three isolated domains. You must NEVER import across these boundaries unless via defined public APIs.

Domain A: The AI Editor (packages/ai-editor)
Role: A "Full-Stack Package" (Library). It is stateless and portable.

Responsibility: Takes visual input/prompts -> Outputs React Code (JSX) & JSON Config.

Tech: React 19, Zod (Schema), OpenAI SDK, BullMQ (Worker Defs).

Constraint: NEVER imports from apps/cms or apps/commerce. Must be usable in any Next.js app.

Domain B: The CMS Host (apps/cms)
Role: The Host Application.

Responsibility: Authentication (Auth0/NextAuth), Multi-tenant Routing (Middleware), Page Rendering, Mounting the Editor.

Tech: Next.js 15 (App Router), Prisma (Client), Tailwind.

Constraint: Handles the "Context" (User ID, Tenant ID) and injects it into the Editor.

Domain C: The Commerce Core (apps/commerce-backend)
Role: The Transaction Engine.

Responsibility: Product PIM, Cart Logic, Payments (Stripe Connect), Orders.

Tech: MedusaJS (Headless), Postgres.

Constraint: The "Source of Truth" for products/inventory. CMS fetches from here via API.

2. Coding Standards
Stack: TypeScript (Strict), Next.js 15 (Server Actions), Prisma ORM, Tailwind CSS (v4), Shadcn/UI.

Styling: Use CSS Variables for everything to support AI-generated themes (var(--primary-color)).

Data Access: ALL database queries MUST include where: { tenantId:... }. No exceptions.

Generative UI: When generating components, ALWAYS include data-component-id attributes for the "Click-to-Edit" locator system.

3. The "No-Hallucination" Policy
Images: When generating UI, ONLY use images provided in the assets context. DO NOT invent URLs like placeholder.com.

Imports: Do not assume a package exists. Check package.json before importing.